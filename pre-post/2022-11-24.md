# 디자인 시스템 (NHN session)

대부분이 디자이너 위주의 설명이 많네

# Dooray

## 왜

프로젝트가 오래되면서 수정에 따른 사이드 이펙트가 많이 발생했고 수정에 소극적으로 변하게 되었음.

앵귤러를 쓰고 있으면서 Vue로 변경을 시도하려했음.

계속 유지보수 및 서비스 추가 개발 요소 들이 생기며 프레임워크 변경에 대한 정리는 우선순위가 밀려나게 되었음

두 프로젝트 모두 공통으로 사용되는 공통 컴포넌트가 문제가 되었음

1. 두프로젝트 모두 동일 컴포넌트를 만듦 -> 유지보수 힘듦 디버깅 힘듦
2. 뷰에서 컴포넌트를 만들어 Ang으로 통신을 시킴 -> Ang와 Vue는 서로 다른 프레임워크로 라이프사이클이 충돌나는 경우와 디버깅이 너무 힘듦
   2.1 타입추론이 안됨, 컴포넌트가 너무 커짐(프레임워크 종특때문에), Watch코드의 남발로 연쇄작용 발생으로 인한 추적이 힘듦이 생김, 코드스타일이 시간이 오래걸림에 따라 다분화 됨
3. 결국 리액트로 변경하며 0부터 쌓아올리기 시작함
   순수한 함수 호출 형태이며 watch형태가 잘 없어서 좋았음, 레퍼런스 많음
   점진적 개발을 하면서 시간이 너무 걸린걸 확인하였으므로 기능개발을 멈추고 리액트로 전환작업에 몰두하게 됨.

## 컴포넌트

LNB만 먼저 집중해서 본다면

1. 색

- 타이포그래피
- 그림자
  스토리북으로 명시하여 공유하게 됨

버튼, 아코디언, 등
중복적인 컴포넌트를 지양하기 위해서 노력함

서비스 연관 컴포넌트는 기본 컴포넌트와는 별개로 스토리북을 만들어 공유하였음.

상태가 있는 것과 없는것으로 컴포넌트를 또 분리함

Container/Presentaitional 패턴을 활용하여 Presentational의 경우를 스토리북에 넣어주고 Container의 하위 컴포넌트에 넘어가는것에 memo를 달아주며 리렌더를 최적화 시켜줌

## 데이터 정리

상태 관리를 어떻게 할 것인가에 관한 내용

1. 컨테이너

- 상태 추가쉬움, 외부 상태 참조 어려움, 계산로직은 컨테이너에만 위치해야함
- 비동기 로직 다루기가 어려움
  - 컨테이너에서 비동기를 부르면 res를 받기전에 컴포넌트가 사라지는 현상도 생각해야 함.

2. 스토어

- 상태 추가시 잡일이 많음
- 비동기로직 다루기 쉬움
- 계산로직 외부에 둘 수 있음

NHN이 한 방법은?

프레젠터에서 화면을 그림, 이벤트 발생시 컨테이너에 알려줌
컨테이너는 스토어의 상태를프레젠터에 연결, 프레젠터에서 동작시 스토어에 연결
스토어 모든 상태관리 및 연산

성격이 다른 두가지 데이터를 정의하기 위해서 두가지 스토어를 정의함
**UI 스토어, 도메인 스토어**
데이터 파편화를 제거할 수 있게 됨

도메인스토어에서 받는 값이 변경되지 않는다면 컨테이너는 데이터를 불러 리렌더 된다고 하더라도 memoizing된 컴포넌트는 데이터의 변경이 없으므로 리렌더가 발생하지 않게 된다.

## 테스트는 어떻게??

프레젠터 컴포넌트

- 스토리북으로 테스트 진행

컨테이너 컴포넌트

- 프레젠터와 스토어를 모킹해서 테스트

사가 테스트

- 결과론적 통합테트만 진행함
